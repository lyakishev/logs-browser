<html>
	<head>
	<title>Инструкция по программе для просмотра логов LogsBrowser</title>
	</head>
	<body>
		<h1>Программа для просмотра логов LogsBrowser</h1>
		<h2>Инcтрукция по использованию</h2>

		<h3>Запуск программы</h3>
		<p>Для запуска программы необходимо <b>распаковать архив</b> с программой и запустить файл <b>logsbrowser.exe</b> - появится главное окно программы:</p>
		<img src="images/main_window.png"></img>
		<p>Основное окно программы разбито на 3 блока:<p>
			<ul>
			<li>Слева вверху - дерево выбора источников логов</li>
			<li>Слева внизу - блок управления выгрузкой логов: указание временного интервала, и кнопки управления процессом выгрузки логов.</li>
			<li>Справа - область отображения выгруженных логов</li>
			</ul>
		<h3>Источники логов</h3>
		<p>Программа ищет логи в источниках, <b>предварительно выбранных</b> в дереве источников логов.</p>
		<p>Процесс указаниия источников для файловых и евент-логов отличаются:</p>
		<ul>
		<li>источники евент-логов указываются в файле <i>evlogs.cfg</i> (по-умолчанию), при запуске программы дерево на вкладке <i>Evenlogs</i> заполняется непосредственно из файла</li>
		<li>в файле <i>logs.cfg</i> (по-умолчанию), указываются пути (папки), просматривая которые, программа будет заполнять дерево источников на вкладке <i>Filelogs</i></li>
		</ul>
		<h4 id='filelogs'>Загрузка списка источников файловых логов</h4>
		<p><b><i>Источник файловых логов</i></b> - один или несколько файлов логов, сгруппированных по подсистеме, для которой ведется лог, например, на сервере есть несколько файлов логов: <i>OrderCatalogue.BL.log.12</i>, <i>OrderCatalogue.BL.log.13</i>, <i>OrderCatalogue.BL.log.14</i> и т.д. - все они будут сгруппированы под общим именем <i>OrderCatalogue.BL</i>. <a href="source_parse.html">Подробнее</a>
		<p>По умолчанию программа при запуске не загружает источники файловых логов (настраивается опцией <i>fill_at_start</i> секции <i>tree</i> в конфигурационном файле) - в дереве обозначены лишь пути указанные в конфигурационном файле. Для заполнения дерева конкретными источниками логов необходимо нажать кнопку <i>Обновить</i> под деревом логов:</p> <img src="images/tree_toolbar.png"></img>
		<p>После нажатия кнопки <i>Обновить</i> программа будет просматривать пути из конфигурационного файла и заполнять дерево источников файловых логов названиями подсистем.<p>
		<h3>Управление деревом источников логов</h3>
		<p>Из интерфейса программы можно делать следующие действия:</p>
		<ul>
		<li>Редактировать конфигурационные файлы, в которых указываются источники логов</li>
		<li>Осуществлять поиск и фильтрацию в дереве логов</li>
		</ul>
		<a href="source_tree.html">Подробнее</a>
		
		<h3>Блок управления выгрузкой логов</h3>
		В блоке управления выгрузкой логов можно:
		<ul>
		<li>выбрать временной интервал - будут выгружены логи, дата/время которых входит в указанный интервал</li>
		<li>запустить/остановить процесс выгрузки логов</li>
		</ul>

		<h4>Выбор временного интервала</h4>
		<p>В блоке выбора временного интервалa<br />
		<img src="images/datetime.png"></img><br />
		время можно выбрать 3-мя способами:</p>
		<ol>
		<li>указать точный интервал времени, заполнив поля <b>From</b> (начальный момент времени) и <b>To</b> (коненчный момент времени). Кнопки <i>Now</i> устанавливает в соответсвующих полях текущее время. Так же выставить интервал можно <a href="#mouse_click">автоматически</a>.
		<li>указать текущий период времени <b>This</b> - текущий час, день или месяц - при выгрузке логов будут выгружены логи от начала текущего периода (начало часа, дня месяцы) до момента запуска процесса выгрузки логов.
		<li>указать интервал "последние..." - <b>Last</b> - при выгрузке логов будут выгружены логи от текущего момента минус указанное число указанных периодов до текущего момента.
		</ol>

		<h4 id="mouse_click" style="color:green;">Автоматическое выставление точного интервала времени</h4>
		<p>При запуске программы в трее появляется значок (зеленый кружок):</p>
		<img src="images/tray.png"></img>
		<p>при нажатии на него значок становится <b style="color:red;">красным</b> и включается "режим слежения за мышью":</p>
		<img src="images/tray_red.png"></img>
		<ul>
		<li>при <b>первом щелчке мышью</b> время <b>From</b> в блоке выбора временного интервала устанавливается на <b>момент щелчка</b> (округление до секунд вниз);</li>
		<li>при повторном <b>нажатии на значок</b> в трее он опять становится <b style="color:green;">зеленым</b> и время <b>To</b> устанавливается на <b>момент нажатия на красный значок</b> в трее (округление до секунд вверх)</li>
		</ul>

		<h4>Запуск/остановка выгрузки логов</h4>
		Для запуска выгрузки логов необходимо после выбора в дереве нужных источников (галочками) нажать кнопку <b>Show</b>.
		<p>Кнопкой <b>Stop</b> останавливается процесс выгрузки логов и в таблице выгруженных логов отображаются выгруженные к моменту остановки логи.</p>
		<p>Кнопка <b>Break</b> останавливает выгрузку логов с потерей уже выгруженных - в таблице выгруженных логов ничего не отображается.</p>

		<h3>Выгрузка логов</h3>
		<p>После выбора источников в дереве источников логов (файловых и/или евент) и нажатия кнопки <b>Show</b> запускается процесс выгрузки логов.
		Из файлов логов на серверах выгружаются отдельные сообщения, удовлетворяющие критериям:</p>
		<ul>
		<li>файл принадлежит какой-то из подсистем-источников выбранных в дереве источников логов</li>
		<li>время сообщения находится в выбранном в блоке выбора временного интервала промежутке</li>
		</ul>
		<!--<p><a href="parse_logs.html">Подробнее</a></p>/-->

		<h3>Область отображения выгруженных логов</h3>
		<p>Область отображения выгруженных логов представляет собой многовкладочный графический элемент, на каждой вкладке которого находятся:</p>
		<ul>
		<li>панель управления</li>
		<li>таблица логов</li>
		</ul>
		<p>Добавить вкладку можно нажав кнопку <img src="images/add_tab.png"></img> в области расположения вкладок.</p>
		<p>Поменять имя вкладки можно, сделав двойной щелчок мышью на имени вкладки.</p>
		<img src="images/change_page_name.png"></img>

		<p>Выгруженные логи отображаются в области отображения выгруженных логов (справа) в таблице.</p> 

		<h4>Панель управления</h4>
		<p>Панель управления состоит из кнопок:</p>
		<ul>
		<li>выполнить запрос <img src="images/execute.png"></img></li>
		<li>остановить выполнение запроса <img src="images/break.png"></img></li>
		<li>редактировать запрос - <b>Edit Query</b></li>
		<li>показать лог - <b>Show Log</b></li>
		<li>показать/скрыть сетку в таблице - <b>Grid Lines</b></li>
		</ul>

		<h4>Редактирование запроса</h4>
		<p>При нажатии на кнопку <b>Edit Query</b> области отображения логов отображается блок редактирования запроса.</p>
		<p>Блок редактирования запроса сотсоит из:</p>
		<ul>
		<li>Поле выбора <b>Load Query</b> - позволяет отобразить в области редактирования запроса сохраненного в конфигурационном файле <i>queries.xml</i> (по-умолчанию)</li>
		<li>Опция <b>auto_lid</b> - см. страницу с подробностями</li>
		<li>Область редактирования запроса</li>
		</ul>
		
		<p>Язык запросов используемый в программе представляет собой стандартный SQL, расширенный возможностями автоматического накопления идентификаторов сообщений в логах (для окна просмотра лога) и подсветки строк.</p>
		<p>Каждая вкладка в области отображения выгруженных логов ассоциирована с таблицей в базе данных. Для использования имени таблицы, ассоциированной с текущей активной вкладкой, в запросах необходимо использовать ключевое слово <b><i>$this</i></b>; например, при выполнении на активной вкладке запроса <b><i>select * from $this</i></b> в графическом элементе - таблице логов этой вкладки отобразятся данные из таблицы БД, ассоциированной с этой вкладкой. Для обращения к данным из другой вкладки, в запросах надо использовать <b><i>$имя_вкладки</i></b></p> 
		<a href="query_editor.html">Подробнее</a>

		<h4>Выполнение запроса</h4>
		<p>Запрос из области редактирования запросов выполняется:</p>
		<ul>
		<li>автоматически при выгрузке логов - запрос выполняется на вкладке, которая была активна в момент нажатия кнопки <b>Show</b> в блоке управления</li>
		<li>при нажатии на кнопку "Выполнить запрос"</li>
		</ul>
		<p>Выполнение запроса можно остановить нажав кнопку "Остановить выполнение запроса".
		<p>После выполнения запроса, его результат отображается в таблице в области отображения логов.</p>

		<h3>Просмотр сообщений</h3>
		<p>При двойном щелчке на строке в таблице в области отображения выгруженных логов или при нажатии на кнопку <b>Show Log</b> - в окне просмотра лога отображается текст из сообщений, соответствующих строке в таблице.<p>
		<a href="log_query.html">Подробнее</a>

		<h3>Окно просмотра лога</h3>
		<img src="images/log_window.png"></img>
		<p>Окно просмотра лога состоит из:</p>
		<ul>
		<li>области со служебной информацией о логах</li>
		<li>области с кнопками перехода к тексту логов, соответствующих следующей/предыдущей строке в таблице</li>
		<li>панели управления</li>
		<li>текста лога</li>
		</ul>

		<h4>Панель управления окна просмотра лога</h4>
		<p>На панели управления окна просмотра лога находятся следующие графические элементы:</p>
		<ul>
		<li>кнопка открыть файл(ы) <img src="images/open_file.png"></img>, из которых взят текст лога в текущем окне</li>
		<li>кнопка сохранить текст лога в файл <img src="images/save_to_file.png"></img> - открывается диалог выбора файла для сохранения</li>
		<li>кнопка копировать текст лога в буффер обмена <img src="images/copy.png"></img> </li>
		<li>поле ввода <b>Find</b> <img src="images/find.png"></img> - поиск введенного текста в тексте лога</li>
		<li>кнопки следующий и предыдущий <img src="images/next_prev.png"></img> - переход к следующему/предыдущему совпадению строки поиска в тексте лога</li>
		<li>кнопка переключения <b>regexp</b><img src="images/regexp.png"></img> - при активном состоянии поиск в тексте лога ведется, используя регулярные выражения</li>
		<li>поле выбора подсветки синтаксиса <img src="images/syntax_choice.png"></img>- варианты подсветок настраиваются в конфигурационном файле <i>syntax_hl</i> (по-умолчанию)</li>
		<li>кнопка редактирования подсветки <img src="images/syntax_edit.png"></img>- открывает область редактирования подсветки в нижней части окна просмотра лога. <a href="syntax_hl.html">Подробнее о подсветке</a></li>
		</ul>

		<h3>Настройки программы</h3>
		<p>Все настройки хранятся в файле <i>config/logsbrowser.cfg</i>. <a href="config.html">Описание файла настроек</a>.
	</body>
</html>
